# LocationViewController : Map Kit View

### CLLocationManager()

ìœ„ì¹˜ ì •ë³´ì˜ ëª¨ë“  ê²ƒì„ ë‹´ê³  ìˆëŠ” location manager

<br>

### ì§€ë„ì— í‘œì‹œí•  ìœ„ì¹˜ ì§€ì •í•´ì£¼ê¸°

```swift
let location = CLLocationCoordinate2D(latitude: 37.55644654511857, longitude: 126.97242848313594)
let span = MKCoordinateSpan(latitudeDelta: 0.01, longitudeDelta: 0.01)
let region = MKCoordinateRegion(center: location, span: span)
mapView.setRegion(region, animated: true)
```

- location : latitudeì™€ longitudeëŠ” ì§€ë„ì˜ ê°€ìš´ë° ì¢Œí‘œ **ìœ„ë„ì™€ ê²½ë„**ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. êµ¬ê¸€ ì§€ë„ì—ì„œ ì¢Œí‘œë¥¼ ë”°ì˜¬ ìˆ˜ ìˆë‹¤.
- span : ì¢Œí‘œë¥¼ ì§€ì ìœ¼ë¡œ **í™•ëŒ€ë˜ëŠ” ì‚¬ì´ì¦ˆ**ë¥¼ í‘œì‹œí•œë‹¤. í¬ê¸°ê°€ ì‘ì„ìˆ˜ë¡ í™•ëŒ€ë˜ì–´ì§„ë‹¤.
- region : MKCoordinateRegion()ì„ ì´ìš©í•´ ìœ„ ë³€ìˆ˜ ì„ ì–¸í•œ **location**ê³¼ **span**ì„ ê°€ì ¸ì˜¨ë‹¤.
- MKMapViewì¸ mapViewì— setRegion() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ regionì„ ì¡ì•„ì¤€ë‹¤.

<br>

### ì–´ë…¸í…Œì´ì…˜ ë‹¬ê¸° ğŸ“

```swift
let annotation = MKPointAnnotation()
annotation.title = "HERE!"
annotation.coordinate = location
mapView.addAnnotation(annotation)
        
// ì–´ë…¸í…Œì´ì…˜ ì‚­ì œ
let annotations = mapView.annotations
mapView.removeAnnotations(annotations)
```

- MKPointAnntation()ìœ¼ë¡œ ì–´ë…¸í…Œì´ì…˜ì„ ë§Œë“ ë‹¤.
- MKMapViewì¸ mapViewì— addAnnotation() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ì–´ë…¸í…Œì´ì…˜ì„ ë‹¬ì•„ì¤€ë‹¤.
- ì‚­ì œ ì‹œì—ëŠ” removeAnnotations() ë¡œ ì „ì²´ ì–´ë…¸í…Œì´ì…˜ì„ ì‚­ì œí•´ì¤„ ìˆ˜ ìˆë‹¤.

<br>

### delegate ì—°ê²°

- locationManager.delegate = self

<br></br>

## CLLocationManagerDelegateë¥¼ ìƒì† ë°›ëŠ” extension

### func : ì‚¬ìš©ìê°€ ìœ„ì¹˜ë¥¼ í—ˆìš©í•œ ê²½ìš°

```swift
func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
    print(#function)
    print(locations)
        
    if let coordinate = locations.last?.coordinate {
            
        let annotation = MKPointAnnotation()
        annotation.title = "CURRENT LOCATION"
        annotation.coordinate = coordinate
        mapView.addAnnotation(annotation)
            
        let span = MKCoordinateSpan(latitudeDelta: 0.01, longitudeDelta: 0.01)
        let region = MKCoordinateRegion(center: coordinate, span: span)
        mapView.setRegion(region, animated: true)
            
        // 10. (ì¤‘ìš”)
        locationManager.stopUpdatingLocation()
            
    } else {
        print("Location cannot find")
    }
}
```

- ìœ„ì¹˜ë¥¼ í—ˆìš©í–ˆì„ ê²½ìš° í˜„ì¬ì˜ ìœ„ì¹˜ë¥¼ ì–´ë…¸í…Œì´ì…˜ì„ í•´ ë³´ì—¬ì£¼ëŠ” ì½”ë“œì´ë‹¤.
  - ìœ„ì˜ ì–´ë…¸í…Œì´ì…˜ ë‹¬ê¸° ì½”ë“œì™€ ìœ ì‚¬í•˜ë‹¤.
- locationManager.stopUpdatingLocation() í•¨ìˆ˜ëŠ” ê³„ì†í•´ì„œ ìœ„ì¹˜ë¥¼ ì—…ë°ì´íŠ¸í•˜ì§€ ì•Šê²Œ í•´ì£¼ëŠ” ì½”ë“œì´ë‹¤.

<br>

### func : ìœ„ì¹˜ ì ‘ê·¼ì´ ì‹¤íŒ¨í–ˆì„ ê²½ìš°

```swift
func locationManager(_ manager: CLLocationManager, didFailWithError error: Error) {
    print(#function)
}
```

- didFailWithError í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

<br>

### func : iOS14 ë¯¸ë§Œ - ê´€ë¦¬ì ë° ê¶Œí•œ ê°ì§€

```swift
func locationManager(_ manager: CLLocationManager, didChangeAuthorization status: CLAuthorizationStatus) {
    print(#function)
    checkUserLocationServicesAuthorization()
}
```

- ì•±ì´ ìœ„ì¹˜ ê´€ë¦¬ìë¥¼ ìƒì„±í•˜ê³ , ìŠ¹ì¸ ìƒíƒœê°€ ë³€ê²½ì´ ë  ë•Œ ëŒ€ë¦¬ìì—ê²Œ ìŠ¹ì¸ ìƒíƒœë¥¼ ì•Œë ¤ì¤€ë‹¤.
- ê¶Œí•œì´ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ ê°ì§€í•´ì„œ ì‹¤í–‰ì´ ëœë‹¤.

<br>

### func : iOS14 ì´ìƒ - ê´€ë¦¬ì ë° ê¶Œí•œ ê°ì§€

```swift
func locationManagerDidChangeAuthorization(_ manager: CLLocationManager) {
    print(#function)
    checkUserLocationServicesAuthorization()
}
```

- ì•±ì´ ìœ„ì¹˜ ê´€ë¦¬ìë¥¼ ìƒì„±í•˜ê³ , ìŠ¹ì¸ ìƒíƒœê°€ ë³€ê²½ì´ ë  ë•Œ ëŒ€ë¦¬ìì—ê²Œ ìŠ¹ì¸ ìƒíƒœë¥¼ ì•Œë ¤ì¤€ë‹¤.
- ê¶Œí•œì´ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ ê°ì§€í•´ì„œ ì‹¤í–‰ì´ ëœë‹¤.

<br>

###  ğŸ“ iOS ë²„ì „ì— ë”°ë¥¸ ë¶„ê¸° ì²˜ë¦¬ì™€ iOS ìœ„ì¹˜ ì„œë¹„ìŠ¤ ì—¬ë¶€ í™•ì¸

ìœ„ì˜ ë‘ í•¨ìˆ˜ì—ì„œ ì‚¬ìš©

:star: UDF. ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¡œ í”„ë¡œí† ì½œ ë‚´ ë©”ì„œë“œê°€ ì•„ë‹˜

```swift
func checkUserLocationServicesAuthorization(){
        
    let authorizationStatus : CLAuthorizationStatus
        
    if #available(iOS 14.0, *) {
        authorizationStatus = locationManager.authorizationStatus // iOS14 ì´ìƒ
    } else {
        authorizationStatus = CLLocationManager.authorizationStatus() // iOS14 ë¯¸ë§Œ
    }
        
    // iOS ìœ„ì¹˜ ì„œë¹„ìŠ¤ í™•ì¸
    if CLLocationManager.locationServicesEnabled() { // ì´ìš© ê°€ëŠ¥í•˜ë‹¤ë©´, trueë¼ë©´
        // ê¶Œí•œ ìƒíƒœ í™•ì¸ ë° ê¶Œí•œ ìš”ì²­ ê°€ëŠ¥ (8ë²ˆ ë©”ì„œë“œ ì‹¤í–‰)
        checkCurrentLocationAuthorization(authorizationStatus)
    } else {
        print("iOS ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì¼œì£¼ì„¸ìš”")
    }
        
}
```

- iOS 14 ë¯¸ë§Œì—ì„œëŠ” CLLocationManager.authorizationStatus()ë¥¼ ì‚¬ìš©
- iOS 14 ì´ìƒì—ì„œëŠ” CLLocationManager().authorizationStatusë¥¼ ì‚¬ìš©

<br>

### ğŸ“ ì‚¬ìš©ìì˜ ê¶Œí•œ ìƒíƒœ í™•ì¸

ìœ„ì˜ í•¨ìˆ˜ì—ì„œ ì‚¬ìš©

:star: UDF. ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¡œ í”„ë¡œí† ì½œ ë‚´ ë©”ì„œë“œê°€ ì•„ë‹˜

```swift
func checkCurrentLocationAuthorization(_ authorizationStatus: CLAuthorizationStatus) {
    
    switch authorizationStatus {
    case .notDetermined:
        locationManager.desiredAccuracy = kCLLocationAccuracyBest
        locationManager.requestWhenInUseAuthorization() // ì•±ì„ ì‚¬ìš©í•˜ëŠ” ë™ì•ˆì— ëŒ€í•œ ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­
        locationManager.startUpdatingLocation() // ìœ„ì¹˜ ì ‘ê·¼ ì‹œì‘! => didUpdateLocations ì‹¤í–‰
    case .restricted, .denied:
        print("DENIED, ì„¤ì •ìœ¼ë¡œ ìœ ë„")
    case .authorizedWhenInUse:
        locationManager.startUpdatingLocation() // ìœ„ì¹˜ ì ‘ê·¼ ì‹œì‘!  => didUpdateLocations ì‹¤í–‰
    case .authorizedAlways:
        print("Always")
    @unknown default:
        print("DEFAULT")
    }
    
    if #available(iOS 14.0, *) {
        // ì •í™•ë„ ì²´í¬ : ì •í™•ë„ê°€ ê°ì†Œê°€ ë˜ì–´ìˆì„ ê²½ìš°, 1ì‹œê°„ 4ë²ˆ, ë¯¸ë¦¬ ì•Œë¦¼ì´ ì•ˆ ê°ˆìˆ˜ë„ ìˆìŒ. ë°°í„°ë¦¬ëŠ” ì˜¤ë˜ ì“¸ ìˆ˜ ìˆë‹¤. ì›Œì¹˜ 8 ì´ìƒ
        let accuarancyState = locationManager.accuracyAuthorization
        
        switch accuarancyState {
        case .fullAccuracy:
            print("FULL")
        case .reducedAccuracy:
            print("REDUCE")
        @unknown default:
            print("DEFAULT")
        }
    }
}
```

- ì‚¬ìš©ìê°€ ìœ„ì¹˜ë¥¼ í—ˆìš©í–ˆëŠ” ì§€ ì•ˆ í–ˆëŠ”ì§€ ê±°ë¶€í•œê±´ì§€ ì´ëŸ° ê¶Œí•œì„ í™•ì¸! (ë‹¨, iOS ìœ„ì¹˜ ì„œë¹„ìŠ¤ê°€ ê°€ëŠ¥í•œì§€ í™•ì¸)
- switch-case ì²˜ë¦¬ë¥¼ í•´ì¤„ ë•Œ, ëª‡ ì¼€ì´ìŠ¤ë¥¼ ì œì™¸í•œ ì¼€ì´ìŠ¤ë“¤ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ê³  ì‹¶ì„ ë•Œ, `@unknown` ìœ¼ë¡œ ì²˜ë¦¬í•´ì¤€ë‹¤.



<br></br>



# ë¬¸ë²•

## countì™€ capacity

```swift
var sample = Array(repeating: "ê°€", count: 100)

sample.count
sample.capacity
```

- `count` : ë°°ì—´ ì•ˆì˜ ìš”ì†Œë“¤ì˜ ê°¯ìˆ˜

-  `capacity` : ë°°ì—´ì˜ ê³µê°„

<br>

ë°°ì—´ ì•ˆì˜ ê°¯ìˆ˜ë§Œ ë”°ì§€ìë©´ 100 ê°œì˜ countê°€ ë‚˜ì˜¤ì§€ë§Œ, insert, appendì— ëŒ€ë¹„í•´ 26ê°œ ì¶”ê°€ ì˜ˆë¹„ ê³µê°„ì„ ê°€ì§€ê³  ìˆë‹¤.

ë”°ë¼ì„œ capacityì˜ ê²½ìš° 126ì˜ ê³µê°„ì„ ê°€ì§€ê³  ìˆë‹¤.

<br>

<left><img width="500" src="https://github.com/BAEKYUJEONG/SSAC_iOS/blob/main/resources/count&capacity.png" alt="count&capacity"/><left>

capacityëŠ” ê°€ì§€ê³  ìˆë˜ ì¶”ê°€ ìš©ëŸ‰ì´ ë‹¤ ì°¨ë©´, ê·¸ ë‹¤ìŒ ì¶”ê°€ ìš©ëŸ‰ì„ 2ë°°ì”© ëŠ˜ë ¤ ì¦ê°•í•˜ì—¬ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤.

<br></br>

## String

```swift
var str = "Hello World - Hello".replacingOccurrences(of: " ", with: "_")
var title = "Squid game".replacingOccurrences(of: " ", with: "_").lowercased() // -> "squid_game"
```

- replacingOccurrencesë¡œ ofì— ë°”ê¾¸ê³  ì‹¶ì€ í•­ëª©, withì— ë°”ë€Œê²Œ ë  í•­ëª©ì„ ì…ë ¥í•˜ë©´ ë°”ë€ë‹¤.

- javaì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì—°ì†í•´ì„œ . ë’¤ì— ë©”ì†Œë“œë¥¼ ê³„ì† ë¶™ì—¬ê°€ë©° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.